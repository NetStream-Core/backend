pre-commit:
  parallel: true
  commands:
    formatting:
      run: go fmt ./...
      stage_fixed: true

    vet:
      run: go vet ./...

    lint:
      run: golangci-lint run --fix


pre-push:
  commands:
    changelog:
      run: |
        echo "Добавление CHANGELOG.md..."
        git add CHANGELOG.md
        if git diff --cached --quiet; then
          echo "Нет изменений для коммита."
        else
          echo "Создание коммита..."
          git commit -m "chore(release): обновлен changelog"
        fi
        echo "Отправка изменений..."
        git push --set-upstream origin main --no-verify
